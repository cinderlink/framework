// Vitest Snapshot v1

exports[`@cinderlink/ipld-database/schema > should create tables 1`] = `
{
  "filters": {
    "search": {
      "dirtCount": 0,
      "documentCount": 0,
      "fieldIds": {
        "id": 1,
        "name": 0,
      },
      "nextId": 0,
      "serializationVersion": 2,
    },
  },
  "headers": {
    "encrypted": false,
    "index": 0,
    "recordsFrom": 0,
    "recordsTo": 0,
    "schema": "test",
    "table": "test",
  },
}
`;

exports[`@cinderlink/ipld-database/schema > should save and restore from dag 1`] = `
Table {
  "currentBlock": {
    "filters": {
      "aggregates": {
        "count": 14,
      },
      "indexes": {
        "name": {
          "z2ikNK1j9q8xKhdHit": {
            "ids": {
              "0": 11,
            },
            "values": {
              "0": "test #10",
            },
          },
          "z2ikNK1j9q8xKhddCp": {
            "ids": {
              "0": 12,
            },
            "values": {
              "0": "test #11",
            },
          },
          "z2ikNK1j9q8xKhdxgk": {
            "ids": {
              "0": 13,
            },
            "values": {
              "0": "test #12",
            },
          },
          "z2ikNK1j9q8xKheJAg": {
            "ids": {
              "0": 14,
            },
            "values": {
              "0": "test #13",
            },
          },
          "z2ikNK1j9q8xKhedec": {
            "ids": {
              "0": 15,
            },
            "values": {
              "0": "test #14",
            },
          },
        },
      },
      "search": {
        "averageFieldLength": {
          "0": 2,
          "1": 1,
        },
        "dirtCount": 0,
        "documentCount": 5,
        "documentIds": {
          "0": 11,
          "1": 12,
          "2": 13,
          "3": 14,
          "4": 15,
        },
        "fieldIds": {
          "id": 1,
          "name": 0,
        },
        "fieldLength": {
          "0": {
            "0": 2,
            "1": 1,
          },
          "1": {
            "0": 2,
            "1": 1,
          },
          "2": {
            "0": 2,
            "1": 1,
          },
          "3": {
            "0": 2,
            "1": 1,
          },
          "4": {
            "0": 2,
            "1": 1,
          },
        },
        "index": {
          "0": {
            "0": "15",
            "1": {
              "1": {
                "4": 1,
              },
            },
          },
          "1": {
            "0": "14",
            "1": {
              "0": {
                "4": 1,
              },
              "1": {
                "3": 1,
              },
            },
          },
          "2": {
            "0": "13",
            "1": {
              "0": {
                "3": 1,
              },
              "1": {
                "2": 1,
              },
            },
          },
          "3": {
            "0": "12",
            "1": {
              "0": {
                "2": 1,
              },
              "1": {
                "1": 1,
              },
            },
          },
          "4": {
            "0": "11",
            "1": {
              "0": {
                "1": 1,
              },
              "1": {
                "0": 1,
              },
            },
          },
          "5": {
            "0": "10",
            "1": {
              "0": {
                "0": 1,
              },
            },
          },
          "6": {
            "0": "test",
            "1": {
              "0": {
                "0": 1,
                "1": 1,
                "2": 1,
                "3": 1,
                "4": 1,
              },
            },
          },
        },
        "nextId": 5,
        "serializationVersion": 2,
      },
    },
    "headers": {
      "encrypted": false,
      "index": 0,
      "recordsFrom": 10,
      "recordsTo": 15,
      "schema": "test",
      "table": "test",
    },
    "prevCID": "bagaaieramjk6z66n6t7ojjmkme4jgh6snk2pisfinycqz6tsebfrdaduhlvq",
    "records": {
      "11": {
        "count": 10,
        "id": 11,
        "name": "test #10",
        "uid": "bagaaiera5cclqznug4jgdkche2c2xtzdrr4vg6ytx266smmnwpiamzdcv4va",
      },
      "12": {
        "count": 11,
        "id": 12,
        "name": "test #11",
        "uid": "bagaaierafgzo6kaa7e7gn5z2euji6rrgbbmh47q7mqboljz6yads5jjqjhjq",
      },
      "13": {
        "count": 12,
        "id": 13,
        "name": "test #12",
        "uid": "bagaaiera5whlnnqljlc6ggcxljo7n653qqqoy66lozqg6ajadijoa22mqvgq",
      },
      "14": {
        "count": 13,
        "id": 14,
        "name": "test #13",
        "uid": "bagaaierarogbvjm6dazmpcqrhcsvom6drmua2nfbgbsqnt3xuzkfba7vocbq",
      },
      "15": {
        "count": 14,
        "id": 15,
        "name": "test #14",
        "uid": "bagaaieran3eembeopv7ghvdowe7tc7wv5mtxof677qan5vkjnuh4yt3thuma",
      },
    },
  },
  "currentBlockIndex": 0,
  "currentIndex": 15,
  "dag": TestDIDDag {
    "dag": TestDag {
      "cache": {
        "bagaaieraayki4vtk2buelkn7whvjugeuqeog2j3iutlblu23exmaxz2iy2yq": {
          "filters": {
            "aggregates": {
              "count": 14,
            },
            "indexes": {
              "name": {
                "z2ikNK1j9q8xKhdHit": {
                  "ids": {
                    "0": 11,
                  },
                  "values": {
                    "0": "test #10",
                  },
                },
                "z2ikNK1j9q8xKhddCp": {
                  "ids": {
                    "0": 12,
                  },
                  "values": {
                    "0": "test #11",
                  },
                },
                "z2ikNK1j9q8xKhdxgk": {
                  "ids": {
                    "0": 13,
                  },
                  "values": {
                    "0": "test #12",
                  },
                },
                "z2ikNK1j9q8xKheJAg": {
                  "ids": {
                    "0": 14,
                  },
                  "values": {
                    "0": "test #13",
                  },
                },
                "z2ikNK1j9q8xKhedec": {
                  "ids": {
                    "0": 15,
                  },
                  "values": {
                    "0": "test #14",
                  },
                },
              },
            },
            "search": {
              "averageFieldLength": {
                "0": 2,
                "1": 1,
              },
              "dirtCount": 0,
              "documentCount": 5,
              "documentIds": {
                "0": 11,
                "1": 12,
                "2": 13,
                "3": 14,
                "4": 15,
              },
              "fieldIds": {
                "id": 1,
                "name": 0,
              },
              "fieldLength": {
                "0": {
                  "0": 2,
                  "1": 1,
                },
                "1": {
                  "0": 2,
                  "1": 1,
                },
                "2": {
                  "0": 2,
                  "1": 1,
                },
                "3": {
                  "0": 2,
                  "1": 1,
                },
                "4": {
                  "0": 2,
                  "1": 1,
                },
              },
              "index": {
                "0": {
                  "0": "15",
                  "1": {
                    "1": {
                      "4": 1,
                    },
                  },
                },
                "1": {
                  "0": "14",
                  "1": {
                    "0": {
                      "4": 1,
                    },
                    "1": {
                      "3": 1,
                    },
                  },
                },
                "2": {
                  "0": "13",
                  "1": {
                    "0": {
                      "3": 1,
                    },
                    "1": {
                      "2": 1,
                    },
                  },
                },
                "3": {
                  "0": "12",
                  "1": {
                    "0": {
                      "2": 1,
                    },
                    "1": {
                      "1": 1,
                    },
                  },
                },
                "4": {
                  "0": "11",
                  "1": {
                    "0": {
                      "1": 1,
                    },
                    "1": {
                      "0": 1,
                    },
                  },
                },
                "5": {
                  "0": "10",
                  "1": {
                    "0": {
                      "0": 1,
                    },
                  },
                },
                "6": {
                  "0": "test",
                  "1": {
                    "0": {
                      "0": 1,
                      "1": 1,
                      "2": 1,
                      "3": 1,
                      "4": 1,
                    },
                  },
                },
              },
              "nextId": 5,
              "serializationVersion": 2,
            },
          },
          "headers": {
            "encrypted": false,
            "index": 0,
            "recordsFrom": 10,
            "recordsTo": 15,
            "schema": "test",
            "table": "test",
          },
          "prevCID": "bagaaieramjk6z66n6t7ojjmkme4jgh6snk2pisfinycqz6tsebfrdaduhlvq",
          "records": {
            "11": {
              "count": 10,
              "id": 11,
              "name": "test #10",
              "uid": "bagaaiera5cclqznug4jgdkche2c2xtzdrr4vg6ytx266smmnwpiamzdcv4va",
            },
            "12": {
              "count": 11,
              "id": 12,
              "name": "test #11",
              "uid": "bagaaierafgzo6kaa7e7gn5z2euji6rrgbbmh47q7mqboljz6yads5jjqjhjq",
            },
            "13": {
              "count": 12,
              "id": 13,
              "name": "test #12",
              "uid": "bagaaiera5whlnnqljlc6ggcxljo7n653qqqoy66lozqg6ajadijoa22mqvgq",
            },
            "14": {
              "count": 13,
              "id": 14,
              "name": "test #13",
              "uid": "bagaaierarogbvjm6dazmpcqrhcsvom6drmua2nfbgbsqnt3xuzkfba7vocbq",
            },
            "15": {
              "count": 14,
              "id": 15,
              "name": "test #14",
              "uid": "bagaaieran3eembeopv7ghvdowe7tc7wv5mtxof677qan5vkjnuh4yt3thuma",
            },
          },
        },
        "bagaaieraevn2x7rhv7mlmbfqro2lvn3fpi4jbs536qes27bkwesqjbkalr2a": {
          "defs": {
            "test": {
              "aggregate": {
                "count": "max",
              },
              "encrypted": false,
              "indexes": {
                "name": {
                  "fields": [
                    "name",
                  ],
                  "unique": true,
                },
              },
              "rollup": 10,
              "schema": {
                "properties": {
                  "count": {
                    "type": "number",
                  },
                  "name": {
                    "type": "string",
                  },
                },
                "type": "object",
              },
              "schemaId": "test",
              "searchOptions": {
                "fields": [
                  "name",
                  "id",
                ],
              },
            },
          },
          "schemaId": "test",
          "tables": {
            "test": "bagaaieraayki4vtk2buelkn7whvjugeuqeog2j3iutlblu23exmaxz2iy2yq",
          },
        },
        "bagaaieramjk6z66n6t7ojjmkme4jgh6snk2pisfinycqz6tsebfrdaduhlvq": {
          "filters": {
            "aggregates": {
              "count": 9,
            },
            "indexes": {
              "name": {
                "zPbkLwYJQbRmZQwe": {
                  "ids": {
                    "0": 1,
                  },
                  "values": {
                    "0": "test #0",
                  },
                },
                "zPbkLwYJQbRmZkRa": {
                  "ids": {
                    "0": 2,
                  },
                  "values": {
                    "0": "test #1",
                  },
                },
                "zPbkLwYJQbRma5uW": {
                  "ids": {
                    "0": 3,
                  },
                  "values": {
                    "0": "test #2",
                  },
                },
                "zPbkLwYJQbRmaRPS": {
                  "ids": {
                    "0": 4,
                  },
                  "values": {
                    "0": "test #3",
                  },
                },
                "zPbkLwYJQbRmaksN": {
                  "ids": {
                    "0": 5,
                  },
                  "values": {
                    "0": "test #4",
                  },
                },
                "zPbkLwYJQbRmb6MJ": {
                  "ids": {
                    "0": 6,
                  },
                  "values": {
                    "0": "test #5",
                  },
                },
                "zPbkLwYJQbRmbRqE": {
                  "ids": {
                    "0": 7,
                  },
                  "values": {
                    "0": "test #6",
                  },
                },
                "zPbkLwYJQbRmbmKA": {
                  "ids": {
                    "0": 8,
                  },
                  "values": {
                    "0": "test #7",
                  },
                },
                "zPbkLwYJQbRmc6o6": {
                  "ids": {
                    "0": 9,
                  },
                  "values": {
                    "0": "test #8",
                  },
                },
                "zPbkLwYJQbRmcSH2": {
                  "ids": {
                    "0": 10,
                  },
                  "values": {
                    "0": "test #9",
                  },
                },
              },
            },
            "search": {
              "averageFieldLength": {
                "0": 2,
                "1": 1,
              },
              "dirtCount": 0,
              "documentCount": 10,
              "documentIds": {
                "0": 1,
                "1": 2,
                "2": 3,
                "3": 4,
                "4": 5,
                "5": 6,
                "6": 7,
                "7": 8,
                "8": 9,
                "9": 10,
              },
              "fieldIds": {
                "id": 1,
                "name": 0,
              },
              "fieldLength": {
                "0": {
                  "0": 2,
                  "1": 1,
                },
                "1": {
                  "0": 2,
                  "1": 1,
                },
                "2": {
                  "0": 2,
                  "1": 1,
                },
                "3": {
                  "0": 2,
                  "1": 1,
                },
                "4": {
                  "0": 2,
                  "1": 1,
                },
                "5": {
                  "0": 2,
                  "1": 1,
                },
                "6": {
                  "0": 2,
                  "1": 1,
                },
                "7": {
                  "0": 2,
                  "1": 1,
                },
                "8": {
                  "0": 2,
                  "1": 1,
                },
                "9": {
                  "0": 2,
                  "1": 1,
                },
              },
              "index": {
                "0": {
                  "0": "9",
                  "1": {
                    "0": {
                      "9": 1,
                    },
                    "1": {
                      "8": 1,
                    },
                  },
                },
                "1": {
                  "0": "8",
                  "1": {
                    "0": {
                      "8": 1,
                    },
                    "1": {
                      "7": 1,
                    },
                  },
                },
                "10": {
                  "0": "0",
                  "1": {
                    "0": {
                      "0": 1,
                    },
                  },
                },
                "11": {
                  "0": "test",
                  "1": {
                    "0": {
                      "0": 1,
                      "1": 1,
                      "2": 1,
                      "3": 1,
                      "4": 1,
                      "5": 1,
                      "6": 1,
                      "7": 1,
                      "8": 1,
                      "9": 1,
                    },
                  },
                },
                "2": {
                  "0": "7",
                  "1": {
                    "0": {
                      "7": 1,
                    },
                    "1": {
                      "6": 1,
                    },
                  },
                },
                "3": {
                  "0": "6",
                  "1": {
                    "0": {
                      "6": 1,
                    },
                    "1": {
                      "5": 1,
                    },
                  },
                },
                "4": {
                  "0": "5",
                  "1": {
                    "0": {
                      "5": 1,
                    },
                    "1": {
                      "4": 1,
                    },
                  },
                },
                "5": {
                  "0": "4",
                  "1": {
                    "0": {
                      "4": 1,
                    },
                    "1": {
                      "3": 1,
                    },
                  },
                },
                "6": {
                  "0": "3",
                  "1": {
                    "0": {
                      "3": 1,
                    },
                    "1": {
                      "2": 1,
                    },
                  },
                },
                "7": {
                  "0": "2",
                  "1": {
                    "0": {
                      "2": 1,
                    },
                    "1": {
                      "1": 1,
                    },
                  },
                },
                "8": {
                  "0": "10",
                  "1": {
                    "1": {
                      "9": 1,
                    },
                  },
                },
                "9": {
                  "0": "1",
                  "1": {
                    "0": {
                      "1": 1,
                    },
                    "1": {
                      "0": 1,
                    },
                  },
                },
              },
              "nextId": 10,
              "serializationVersion": 2,
            },
          },
          "headers": {
            "encrypted": false,
            "index": 0,
            "recordsFrom": 0,
            "recordsTo": 10,
            "schema": "test",
            "table": "test",
          },
          "records": {
            "1": {
              "count": 0,
              "id": 1,
              "name": "test #0",
              "uid": "bagaaiera5is7pyt22y627ux77oohai2u36usfwo525ubrwmyrccyebcrio4a",
            },
            "10": {
              "count": 9,
              "id": 10,
              "name": "test #9",
              "uid": "bagaaierag2lqmtm2wxvmxhm5g42wbcknehlokbj6ugd2csmfnzklsxpkbrna",
            },
            "2": {
              "count": 1,
              "id": 2,
              "name": "test #1",
              "uid": "bagaaierazrl3zpw6mauy7gzr6pu4youw6injufdhylqkqnerpb4wnbqggpca",
            },
            "3": {
              "count": 2,
              "id": 3,
              "name": "test #2",
              "uid": "bagaaieramxvs2trk4gjypwi7ua3aujtga262d3os52j5auroidueqidquroa",
            },
            "4": {
              "count": 3,
              "id": 4,
              "name": "test #3",
              "uid": "bagaaierabxgwcvvlt2sqgrxwqoxhlkqphc5g5o3rwnkqbyw4bxh5txk3lmiq",
            },
            "5": {
              "count": 4,
              "id": 5,
              "name": "test #4",
              "uid": "bagaaieraocak2nlelzyahrimw56md76dreyn5gj4i6memvfxdpskrwfwtnbq",
            },
            "6": {
              "count": 5,
              "id": 6,
              "name": "test #5",
              "uid": "bagaaieraejdb7at7iexgkiniqlsfdjs2olvojyccvuznfb4gnkgycejtz6nq",
            },
            "7": {
              "count": 6,
              "id": 7,
              "name": "test #6",
              "uid": "bagaaierattsi5wpjdlg5x2fktuiav2regxk6dgafpp37a7jw5nm73sq4ey3q",
            },
            "8": {
              "count": 7,
              "id": 8,
              "name": "test #7",
              "uid": "bagaaierah3clqcbel4shsoqrz4sdxxagjuea5kq5b6qbcbzmmaq6mie2u3ha",
            },
            "9": {
              "count": 8,
              "id": 9,
              "name": "test #8",
              "uid": "bagaaieraynlpead24c27jwakjmyc6vpmnpuxceiy4qbvmigjuatlxigq3b2q",
            },
          },
        },
      },
    },
    "did": DID {
      "_client": RPCClient {},
      "_id": "did:key:z6MkofP3UGcgQT1iXWFmxczLNCddG5MrWbsrKRNGcJSVyebo",
      "_resolver": Resolver {
        "cache": [Function],
        "registry": {
          "key": [Function],
        },
      },
    },
  },
  "debug": {
    "enabled": false,
    "logger": [Function],
  },
  "def": {
    "aggregate": {
      "count": "max",
    },
    "encrypted": false,
    "indexes": {
      "name": {
        "fields": [
          "name",
        ],
        "unique": true,
      },
    },
    "rollup": 10,
    "schema": {
      "properties": {
        "count": {
          "type": "number",
        },
        "name": {
          "type": "string",
        },
      },
      "type": "object",
    },
    "schemaId": "test",
    "searchOptions": {
      "fields": [
        "name",
        "id",
      ],
    },
  },
  "encrypted": false,
  "tableId": "test",
  "writeStartAt": 0,
  "writing": false,
}
`;
