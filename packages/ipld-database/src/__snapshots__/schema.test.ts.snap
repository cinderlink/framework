// Vitest Snapshot v1

exports[`@cinderlink/ipld-database/schema > should create tables 1`] = `
{
  "filters": {
    "search": {
      "dirtCount": 0,
      "documentCount": 0,
      "fieldIds": {
        "id": 1,
        "name": 0,
      },
      "nextId": 0,
      "serializationVersion": 2,
    },
  },
  "headers": {
    "encrypted": false,
    "index": 0,
    "recordsFrom": 0,
    "recordsTo": 0,
    "schema": "test",
    "table": "test",
  },
}
`;

exports[`@cinderlink/ipld-database/schema > should save and restore from dag 1`] = `
Table {
  "currentBlock": {
    "filters": {
      "aggregates": {
        "count": 14,
      },
      "indexes": {
        "name": {
          "z2ikNK1j9q8xKhdHit": {
            "ids": {
              "0": 11,
            },
            "values": {
              "0": "test #10",
            },
          },
          "z2ikNK1j9q8xKhddCp": {
            "ids": {
              "0": 12,
            },
            "values": {
              "0": "test #11",
            },
          },
          "z2ikNK1j9q8xKhdxgk": {
            "ids": {
              "0": 13,
            },
            "values": {
              "0": "test #12",
            },
          },
          "z2ikNK1j9q8xKheJAg": {
            "ids": {
              "0": 14,
            },
            "values": {
              "0": "test #13",
            },
          },
          "z2ikNK1j9q8xKhedec": {
            "ids": {
              "0": 15,
            },
            "values": {
              "0": "test #14",
            },
          },
        },
      },
      "search": {
        "averageFieldLength": {
          "0": 2,
          "1": 1,
        },
        "dirtCount": 0,
        "documentCount": 5,
        "documentIds": {
          "0": 11,
          "1": 12,
          "2": 13,
          "3": 14,
          "4": 15,
        },
        "fieldIds": {
          "id": 1,
          "name": 0,
        },
        "fieldLength": {
          "0": {
            "0": 2,
            "1": 1,
          },
          "1": {
            "0": 2,
            "1": 1,
          },
          "2": {
            "0": 2,
            "1": 1,
          },
          "3": {
            "0": 2,
            "1": 1,
          },
          "4": {
            "0": 2,
            "1": 1,
          },
        },
        "index": {
          "0": {
            "0": "15",
            "1": {
              "1": {
                "4": 1,
              },
            },
          },
          "1": {
            "0": "14",
            "1": {
              "0": {
                "4": 1,
              },
              "1": {
                "3": 1,
              },
            },
          },
          "2": {
            "0": "13",
            "1": {
              "0": {
                "3": 1,
              },
              "1": {
                "2": 1,
              },
            },
          },
          "3": {
            "0": "12",
            "1": {
              "0": {
                "2": 1,
              },
              "1": {
                "1": 1,
              },
            },
          },
          "4": {
            "0": "11",
            "1": {
              "0": {
                "1": 1,
              },
              "1": {
                "0": 1,
              },
            },
          },
          "5": {
            "0": "10",
            "1": {
              "0": {
                "0": 1,
              },
            },
          },
          "6": {
            "0": "test",
            "1": {
              "0": {
                "0": 1,
                "1": 1,
                "2": 1,
                "3": 1,
                "4": 1,
              },
            },
          },
        },
        "nextId": 5,
        "serializationVersion": 2,
      },
    },
    "headers": {
      "encrypted": false,
      "index": 0,
      "recordsFrom": 10,
      "recordsTo": 15,
      "schema": "test",
      "table": "test",
    },
    "prevCID": "bagaaieraov5tnjmponm6mmvgourv6ex2ho2svk2qenkwqjak2e3h5l7xntna",
    "records": {
      "11": {
        "count": 10,
        "id": 11,
        "name": "test #10",
      },
      "12": {
        "count": 11,
        "id": 12,
        "name": "test #11",
      },
      "13": {
        "count": 12,
        "id": 13,
        "name": "test #12",
      },
      "14": {
        "count": 13,
        "id": 14,
        "name": "test #13",
      },
      "15": {
        "count": 14,
        "id": 15,
        "name": "test #14",
      },
    },
  },
  "currentBlockIndex": 0,
  "currentIndex": 15,
  "dag": TestDIDDag {
    "dag": TestDag {
      "cache": {
        "bagaaieraov5tnjmponm6mmvgourv6ex2ho2svk2qenkwqjak2e3h5l7xntna": {
          "filters": {
            "aggregates": {
              "count": 9,
            },
            "indexes": {
              "name": {
                "zPbkLwYJQbRmZQwe": {
                  "ids": {
                    "0": 1,
                  },
                  "values": {
                    "0": "test #0",
                  },
                },
                "zPbkLwYJQbRmZkRa": {
                  "ids": {
                    "0": 2,
                  },
                  "values": {
                    "0": "test #1",
                  },
                },
                "zPbkLwYJQbRma5uW": {
                  "ids": {
                    "0": 3,
                  },
                  "values": {
                    "0": "test #2",
                  },
                },
                "zPbkLwYJQbRmaRPS": {
                  "ids": {
                    "0": 4,
                  },
                  "values": {
                    "0": "test #3",
                  },
                },
                "zPbkLwYJQbRmaksN": {
                  "ids": {
                    "0": 5,
                  },
                  "values": {
                    "0": "test #4",
                  },
                },
                "zPbkLwYJQbRmb6MJ": {
                  "ids": {
                    "0": 6,
                  },
                  "values": {
                    "0": "test #5",
                  },
                },
                "zPbkLwYJQbRmbRqE": {
                  "ids": {
                    "0": 7,
                  },
                  "values": {
                    "0": "test #6",
                  },
                },
                "zPbkLwYJQbRmbmKA": {
                  "ids": {
                    "0": 8,
                  },
                  "values": {
                    "0": "test #7",
                  },
                },
                "zPbkLwYJQbRmc6o6": {
                  "ids": {
                    "0": 9,
                  },
                  "values": {
                    "0": "test #8",
                  },
                },
                "zPbkLwYJQbRmcSH2": {
                  "ids": {
                    "0": 10,
                  },
                  "values": {
                    "0": "test #9",
                  },
                },
              },
            },
            "search": {
              "averageFieldLength": {
                "0": 2,
                "1": 1,
              },
              "dirtCount": 0,
              "documentCount": 10,
              "documentIds": {
                "0": 1,
                "1": 2,
                "2": 3,
                "3": 4,
                "4": 5,
                "5": 6,
                "6": 7,
                "7": 8,
                "8": 9,
                "9": 10,
              },
              "fieldIds": {
                "id": 1,
                "name": 0,
              },
              "fieldLength": {
                "0": {
                  "0": 2,
                  "1": 1,
                },
                "1": {
                  "0": 2,
                  "1": 1,
                },
                "2": {
                  "0": 2,
                  "1": 1,
                },
                "3": {
                  "0": 2,
                  "1": 1,
                },
                "4": {
                  "0": 2,
                  "1": 1,
                },
                "5": {
                  "0": 2,
                  "1": 1,
                },
                "6": {
                  "0": 2,
                  "1": 1,
                },
                "7": {
                  "0": 2,
                  "1": 1,
                },
                "8": {
                  "0": 2,
                  "1": 1,
                },
                "9": {
                  "0": 2,
                  "1": 1,
                },
              },
              "index": {
                "0": {
                  "0": "9",
                  "1": {
                    "0": {
                      "9": 1,
                    },
                    "1": {
                      "8": 1,
                    },
                  },
                },
                "1": {
                  "0": "8",
                  "1": {
                    "0": {
                      "8": 1,
                    },
                    "1": {
                      "7": 1,
                    },
                  },
                },
                "10": {
                  "0": "0",
                  "1": {
                    "0": {
                      "0": 1,
                    },
                  },
                },
                "11": {
                  "0": "test",
                  "1": {
                    "0": {
                      "0": 1,
                      "1": 1,
                      "2": 1,
                      "3": 1,
                      "4": 1,
                      "5": 1,
                      "6": 1,
                      "7": 1,
                      "8": 1,
                      "9": 1,
                    },
                  },
                },
                "2": {
                  "0": "7",
                  "1": {
                    "0": {
                      "7": 1,
                    },
                    "1": {
                      "6": 1,
                    },
                  },
                },
                "3": {
                  "0": "6",
                  "1": {
                    "0": {
                      "6": 1,
                    },
                    "1": {
                      "5": 1,
                    },
                  },
                },
                "4": {
                  "0": "5",
                  "1": {
                    "0": {
                      "5": 1,
                    },
                    "1": {
                      "4": 1,
                    },
                  },
                },
                "5": {
                  "0": "4",
                  "1": {
                    "0": {
                      "4": 1,
                    },
                    "1": {
                      "3": 1,
                    },
                  },
                },
                "6": {
                  "0": "3",
                  "1": {
                    "0": {
                      "3": 1,
                    },
                    "1": {
                      "2": 1,
                    },
                  },
                },
                "7": {
                  "0": "2",
                  "1": {
                    "0": {
                      "2": 1,
                    },
                    "1": {
                      "1": 1,
                    },
                  },
                },
                "8": {
                  "0": "10",
                  "1": {
                    "1": {
                      "9": 1,
                    },
                  },
                },
                "9": {
                  "0": "1",
                  "1": {
                    "0": {
                      "1": 1,
                    },
                    "1": {
                      "0": 1,
                    },
                  },
                },
              },
              "nextId": 10,
              "serializationVersion": 2,
            },
          },
          "headers": {
            "encrypted": false,
            "index": 0,
            "recordsFrom": 0,
            "recordsTo": 10,
            "schema": "test",
            "table": "test",
          },
          "records": {
            "1": {
              "count": 0,
              "id": 1,
              "name": "test #0",
            },
            "10": {
              "count": 9,
              "id": 10,
              "name": "test #9",
            },
            "2": {
              "count": 1,
              "id": 2,
              "name": "test #1",
            },
            "3": {
              "count": 2,
              "id": 3,
              "name": "test #2",
            },
            "4": {
              "count": 3,
              "id": 4,
              "name": "test #3",
            },
            "5": {
              "count": 4,
              "id": 5,
              "name": "test #4",
            },
            "6": {
              "count": 5,
              "id": 6,
              "name": "test #5",
            },
            "7": {
              "count": 6,
              "id": 7,
              "name": "test #6",
            },
            "8": {
              "count": 7,
              "id": 8,
              "name": "test #7",
            },
            "9": {
              "count": 8,
              "id": 9,
              "name": "test #8",
            },
          },
        },
        "bagaaieravul2q66d2ghrd5an4vr73jnvi7d2r4sfuf4d5deja2wlb7lyodsa": {
          "defs": {
            "test": {
              "aggregate": {
                "count": "max",
              },
              "encrypted": false,
              "indexes": {
                "name": {
                  "fields": [
                    "name",
                  ],
                  "unique": true,
                },
              },
              "rollup": 10,
              "schema": {
                "properties": {
                  "count": {
                    "type": "number",
                  },
                  "name": {
                    "type": "string",
                  },
                },
                "type": "object",
              },
              "schemaId": "test",
              "searchOptions": {
                "fields": [
                  "name",
                  "id",
                ],
              },
            },
          },
          "schemaId": "test",
          "tables": {
            "test": "bagaaieravyvvy2c63gm3kymuhe5il46pgf6hnduyjqeyoqxaupw4w2aq4lfq",
          },
        },
        "bagaaieravyvvy2c63gm3kymuhe5il46pgf6hnduyjqeyoqxaupw4w2aq4lfq": {
          "filters": {
            "aggregates": {
              "count": 14,
            },
            "indexes": {
              "name": {
                "z2ikNK1j9q8xKhdHit": {
                  "ids": {
                    "0": 11,
                  },
                  "values": {
                    "0": "test #10",
                  },
                },
                "z2ikNK1j9q8xKhddCp": {
                  "ids": {
                    "0": 12,
                  },
                  "values": {
                    "0": "test #11",
                  },
                },
                "z2ikNK1j9q8xKhdxgk": {
                  "ids": {
                    "0": 13,
                  },
                  "values": {
                    "0": "test #12",
                  },
                },
                "z2ikNK1j9q8xKheJAg": {
                  "ids": {
                    "0": 14,
                  },
                  "values": {
                    "0": "test #13",
                  },
                },
                "z2ikNK1j9q8xKhedec": {
                  "ids": {
                    "0": 15,
                  },
                  "values": {
                    "0": "test #14",
                  },
                },
              },
            },
            "search": {
              "averageFieldLength": {
                "0": 2,
                "1": 1,
              },
              "dirtCount": 0,
              "documentCount": 5,
              "documentIds": {
                "0": 11,
                "1": 12,
                "2": 13,
                "3": 14,
                "4": 15,
              },
              "fieldIds": {
                "id": 1,
                "name": 0,
              },
              "fieldLength": {
                "0": {
                  "0": 2,
                  "1": 1,
                },
                "1": {
                  "0": 2,
                  "1": 1,
                },
                "2": {
                  "0": 2,
                  "1": 1,
                },
                "3": {
                  "0": 2,
                  "1": 1,
                },
                "4": {
                  "0": 2,
                  "1": 1,
                },
              },
              "index": {
                "0": {
                  "0": "15",
                  "1": {
                    "1": {
                      "4": 1,
                    },
                  },
                },
                "1": {
                  "0": "14",
                  "1": {
                    "0": {
                      "4": 1,
                    },
                    "1": {
                      "3": 1,
                    },
                  },
                },
                "2": {
                  "0": "13",
                  "1": {
                    "0": {
                      "3": 1,
                    },
                    "1": {
                      "2": 1,
                    },
                  },
                },
                "3": {
                  "0": "12",
                  "1": {
                    "0": {
                      "2": 1,
                    },
                    "1": {
                      "1": 1,
                    },
                  },
                },
                "4": {
                  "0": "11",
                  "1": {
                    "0": {
                      "1": 1,
                    },
                    "1": {
                      "0": 1,
                    },
                  },
                },
                "5": {
                  "0": "10",
                  "1": {
                    "0": {
                      "0": 1,
                    },
                  },
                },
                "6": {
                  "0": "test",
                  "1": {
                    "0": {
                      "0": 1,
                      "1": 1,
                      "2": 1,
                      "3": 1,
                      "4": 1,
                    },
                  },
                },
              },
              "nextId": 5,
              "serializationVersion": 2,
            },
          },
          "headers": {
            "encrypted": false,
            "index": 0,
            "recordsFrom": 10,
            "recordsTo": 15,
            "schema": "test",
            "table": "test",
          },
          "prevCID": "bagaaieraov5tnjmponm6mmvgourv6ex2ho2svk2qenkwqjak2e3h5l7xntna",
          "records": {
            "11": {
              "count": 10,
              "id": 11,
              "name": "test #10",
            },
            "12": {
              "count": 11,
              "id": 12,
              "name": "test #11",
            },
            "13": {
              "count": 12,
              "id": 13,
              "name": "test #12",
            },
            "14": {
              "count": 13,
              "id": 14,
              "name": "test #13",
            },
            "15": {
              "count": 14,
              "id": 15,
              "name": "test #14",
            },
          },
        },
      },
    },
    "did": DID {
      "_client": RPCClient {},
      "_id": "did:key:z6MkofP3UGcgQT1iXWFmxczLNCddG5MrWbsrKRNGcJSVyebo",
      "_resolver": Resolver {
        "cache": [Function],
        "registry": {
          "key": [Function],
        },
      },
    },
  },
  "debug": {
    "enabled": false,
    "logger": [Function],
  },
  "def": {
    "aggregate": {
      "count": "max",
    },
    "encrypted": false,
    "indexes": {
      "name": {
        "fields": [
          "name",
        ],
        "unique": true,
      },
    },
    "rollup": 10,
    "schema": {
      "properties": {
        "count": {
          "type": "number",
        },
        "name": {
          "type": "string",
        },
      },
      "type": "object",
    },
    "schemaId": "test",
    "searchOptions": {
      "fields": [
        "name",
        "id",
      ],
    },
  },
  "encrypted": false,
  "tableId": "test",
  "writeStartAt": 0,
  "writing": false,
}
`;
