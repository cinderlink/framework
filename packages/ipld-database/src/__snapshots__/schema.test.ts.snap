// Vitest Snapshot v1

exports[`@candor/ipld-database/schema > should create tables 1`] = `
{
  "filters": {
    "search": {
      "averageFieldLength": [],
      "dirtCount": 0,
      "documentCount": 0,
      "documentIds": {},
      "fieldIds": {
        "id": 1,
        "name": 0,
      },
      "fieldLength": {},
      "index": [],
      "nextId": 0,
      "serializationVersion": 2,
      "storedFields": {},
    },
  },
  "headers": {
    "encrypted": false,
    "index": 0,
    "recordsFrom": 1,
    "recordsTo": 1,
    "schema": "test",
    "table": "test",
  },
  "prevCID": undefined,
}
`;

exports[`@candor/ipld-database/schema > should save and restore from dag 1`] = `
Table {
  "currentBlock": {
    "filters": {
      "aggregates": {
        "count": 14,
      },
      "indexes": {
        "name": {
          "z2ikNK1j9q8xKhdHit": {
            "ids": [
              11,
            ],
            "values": [
              "test #10",
            ],
          },
          "z2ikNK1j9q8xKhddCp": {
            "ids": [
              12,
            ],
            "values": [
              "test #11",
            ],
          },
          "z2ikNK1j9q8xKhdxgk": {
            "ids": [
              13,
            ],
            "values": [
              "test #12",
            ],
          },
          "z2ikNK1j9q8xKheJAg": {
            "ids": [
              14,
            ],
            "values": [
              "test #13",
            ],
          },
          "z2ikNK1j9q8xKhedec": {
            "ids": [
              15,
            ],
            "values": [
              "test #14",
            ],
          },
        },
      },
      "search": {
        "averageFieldLength": [
          2,
          1,
        ],
        "dirtCount": 0,
        "documentCount": 5,
        "documentIds": {
          "0": 11,
          "1": 12,
          "2": 13,
          "3": 14,
          "4": 15,
        },
        "fieldIds": {
          "id": 1,
          "name": 0,
        },
        "fieldLength": {
          "0": [
            2,
            1,
          ],
          "1": [
            2,
            1,
          ],
          "2": [
            2,
            1,
          ],
          "3": [
            2,
            1,
          ],
          "4": [
            2,
            1,
          ],
        },
        "index": [
          [
            "15",
            {
              "1": {
                "4": 1,
              },
            },
          ],
          [
            "14",
            {
              "0": {
                "4": 1,
              },
              "1": {
                "3": 1,
              },
            },
          ],
          [
            "13",
            {
              "0": {
                "3": 1,
              },
              "1": {
                "2": 1,
              },
            },
          ],
          [
            "12",
            {
              "0": {
                "2": 1,
              },
              "1": {
                "1": 1,
              },
            },
          ],
          [
            "11",
            {
              "0": {
                "1": 1,
              },
              "1": {
                "0": 1,
              },
            },
          ],
          [
            "10",
            {
              "0": {
                "0": 1,
              },
            },
          ],
          [
            "test",
            {
              "0": {
                "0": 1,
                "1": 1,
                "2": 1,
                "3": 1,
                "4": 1,
              },
            },
          ],
        ],
        "nextId": 5,
        "serializationVersion": 2,
        "storedFields": {},
      },
    },
    "headers": {
      "encrypted": false,
      "index": 0,
      "recordsFrom": 11,
      "recordsTo": 15,
      "schema": "test",
      "table": "test",
    },
    "prevCID": "bagaaieralnu77mm3dv7pzhqdx75kkhrxm4rdlzqb525xa3mndlnrrewl2x5a",
    "records": {
      "11": {
        "count": 10,
        "id": 11,
        "name": "test #10",
      },
      "12": {
        "count": 11,
        "id": 12,
        "name": "test #11",
      },
      "13": {
        "count": 12,
        "id": 13,
        "name": "test #12",
      },
      "14": {
        "count": 13,
        "id": 14,
        "name": "test #13",
      },
      "15": {
        "count": 14,
        "id": 15,
        "name": "test #14",
      },
    },
  },
  "currentBlockIndex": 0,
  "currentIndex": 16,
  "dag": TestDIDDag {
    "dag": TestDag {
      "cache": {
        "bagaaiera4cuuwkkqaouspd62bczp43yozyf3esnpaqymev3wnnpq5hxzwd3q": {
          "defs": {
            "test": {
              "aggregate": {
                "count": "max",
              },
              "encrypted": false,
              "indexes": {
                "name": {
                  "fields": [
                    "name",
                  ],
                  "unique": true,
                },
              },
              "rollup": 10,
              "schema": {
                "properties": {
                  "count": {
                    "type": "number",
                  },
                  "name": {
                    "type": "string",
                  },
                },
                "type": "object",
              },
              "schemaId": "test",
              "searchOptions": {
                "fields": [
                  "name",
                  "id",
                ],
              },
            },
          },
          "schemaId": "test",
          "tables": {
            "test": "bagaaierapykbw62b6mpsfxtmupkefa2uklrxkg4mzb6kcpvyeheejwasz67a",
          },
        },
        "bagaaieralnu77mm3dv7pzhqdx75kkhrxm4rdlzqb525xa3mndlnrrewl2x5a": {
          "filters": {
            "aggregates": {
              "count": 9,
            },
            "indexes": {
              "name": {
                "zPbkLwYJQbRmZQwe": {
                  "ids": [
                    1,
                  ],
                  "values": [
                    "test #0",
                  ],
                },
                "zPbkLwYJQbRmZkRa": {
                  "ids": [
                    2,
                  ],
                  "values": [
                    "test #1",
                  ],
                },
                "zPbkLwYJQbRma5uW": {
                  "ids": [
                    3,
                  ],
                  "values": [
                    "test #2",
                  ],
                },
                "zPbkLwYJQbRmaRPS": {
                  "ids": [
                    4,
                  ],
                  "values": [
                    "test #3",
                  ],
                },
                "zPbkLwYJQbRmaksN": {
                  "ids": [
                    5,
                  ],
                  "values": [
                    "test #4",
                  ],
                },
                "zPbkLwYJQbRmb6MJ": {
                  "ids": [
                    6,
                  ],
                  "values": [
                    "test #5",
                  ],
                },
                "zPbkLwYJQbRmbRqE": {
                  "ids": [
                    7,
                  ],
                  "values": [
                    "test #6",
                  ],
                },
                "zPbkLwYJQbRmbmKA": {
                  "ids": [
                    8,
                  ],
                  "values": [
                    "test #7",
                  ],
                },
                "zPbkLwYJQbRmc6o6": {
                  "ids": [
                    9,
                  ],
                  "values": [
                    "test #8",
                  ],
                },
                "zPbkLwYJQbRmcSH2": {
                  "ids": [
                    10,
                  ],
                  "values": [
                    "test #9",
                  ],
                },
              },
            },
            "search": {
              "averageFieldLength": [
                2,
                1,
              ],
              "dirtCount": 0,
              "documentCount": 10,
              "documentIds": {
                "0": 1,
                "1": 2,
                "2": 3,
                "3": 4,
                "4": 5,
                "5": 6,
                "6": 7,
                "7": 8,
                "8": 9,
                "9": 10,
              },
              "fieldIds": {
                "id": 1,
                "name": 0,
              },
              "fieldLength": {
                "0": [
                  2,
                  1,
                ],
                "1": [
                  2,
                  1,
                ],
                "2": [
                  2,
                  1,
                ],
                "3": [
                  2,
                  1,
                ],
                "4": [
                  2,
                  1,
                ],
                "5": [
                  2,
                  1,
                ],
                "6": [
                  2,
                  1,
                ],
                "7": [
                  2,
                  1,
                ],
                "8": [
                  2,
                  1,
                ],
                "9": [
                  2,
                  1,
                ],
              },
              "index": [
                [
                  "9",
                  {
                    "0": {
                      "9": 1,
                    },
                    "1": {
                      "8": 1,
                    },
                  },
                ],
                [
                  "8",
                  {
                    "0": {
                      "8": 1,
                    },
                    "1": {
                      "7": 1,
                    },
                  },
                ],
                [
                  "7",
                  {
                    "0": {
                      "7": 1,
                    },
                    "1": {
                      "6": 1,
                    },
                  },
                ],
                [
                  "6",
                  {
                    "0": {
                      "6": 1,
                    },
                    "1": {
                      "5": 1,
                    },
                  },
                ],
                [
                  "5",
                  {
                    "0": {
                      "5": 1,
                    },
                    "1": {
                      "4": 1,
                    },
                  },
                ],
                [
                  "4",
                  {
                    "0": {
                      "4": 1,
                    },
                    "1": {
                      "3": 1,
                    },
                  },
                ],
                [
                  "3",
                  {
                    "0": {
                      "3": 1,
                    },
                    "1": {
                      "2": 1,
                    },
                  },
                ],
                [
                  "2",
                  {
                    "0": {
                      "2": 1,
                    },
                    "1": {
                      "1": 1,
                    },
                  },
                ],
                [
                  "10",
                  {
                    "1": {
                      "9": 1,
                    },
                  },
                ],
                [
                  "1",
                  {
                    "0": {
                      "1": 1,
                    },
                    "1": {
                      "0": 1,
                    },
                  },
                ],
                [
                  "0",
                  {
                    "0": {
                      "0": 1,
                    },
                  },
                ],
                [
                  "test",
                  {
                    "0": {
                      "0": 1,
                      "1": 1,
                      "2": 1,
                      "3": 1,
                      "4": 1,
                      "5": 1,
                      "6": 1,
                      "7": 1,
                      "8": 1,
                      "9": 1,
                    },
                  },
                ],
              ],
              "nextId": 10,
              "serializationVersion": 2,
              "storedFields": {},
            },
          },
          "headers": {
            "encrypted": false,
            "index": 0,
            "recordsFrom": 1,
            "recordsTo": 10,
            "schema": "test",
            "table": "test",
          },
          "prevCID": undefined,
          "records": {
            "1": {
              "count": 0,
              "id": 1,
              "name": "test #0",
            },
            "10": {
              "count": 9,
              "id": 10,
              "name": "test #9",
            },
            "2": {
              "count": 1,
              "id": 2,
              "name": "test #1",
            },
            "3": {
              "count": 2,
              "id": 3,
              "name": "test #2",
            },
            "4": {
              "count": 3,
              "id": 4,
              "name": "test #3",
            },
            "5": {
              "count": 4,
              "id": 5,
              "name": "test #4",
            },
            "6": {
              "count": 5,
              "id": 6,
              "name": "test #5",
            },
            "7": {
              "count": 6,
              "id": 7,
              "name": "test #6",
            },
            "8": {
              "count": 7,
              "id": 8,
              "name": "test #7",
            },
            "9": {
              "count": 8,
              "id": 9,
              "name": "test #8",
            },
          },
        },
        "bagaaierapykbw62b6mpsfxtmupkefa2uklrxkg4mzb6kcpvyeheejwasz67a": {
          "filters": {
            "aggregates": {
              "count": 14,
            },
            "indexes": {
              "name": {
                "z2ikNK1j9q8xKhdHit": {
                  "ids": [
                    11,
                  ],
                  "values": [
                    "test #10",
                  ],
                },
                "z2ikNK1j9q8xKhddCp": {
                  "ids": [
                    12,
                  ],
                  "values": [
                    "test #11",
                  ],
                },
                "z2ikNK1j9q8xKhdxgk": {
                  "ids": [
                    13,
                  ],
                  "values": [
                    "test #12",
                  ],
                },
                "z2ikNK1j9q8xKheJAg": {
                  "ids": [
                    14,
                  ],
                  "values": [
                    "test #13",
                  ],
                },
                "z2ikNK1j9q8xKhedec": {
                  "ids": [
                    15,
                  ],
                  "values": [
                    "test #14",
                  ],
                },
              },
            },
            "search": {
              "averageFieldLength": [
                2,
                1,
              ],
              "dirtCount": 0,
              "documentCount": 5,
              "documentIds": {
                "0": 11,
                "1": 12,
                "2": 13,
                "3": 14,
                "4": 15,
              },
              "fieldIds": {
                "id": 1,
                "name": 0,
              },
              "fieldLength": {
                "0": [
                  2,
                  1,
                ],
                "1": [
                  2,
                  1,
                ],
                "2": [
                  2,
                  1,
                ],
                "3": [
                  2,
                  1,
                ],
                "4": [
                  2,
                  1,
                ],
              },
              "index": [
                [
                  "15",
                  {
                    "1": {
                      "4": 1,
                    },
                  },
                ],
                [
                  "14",
                  {
                    "0": {
                      "4": 1,
                    },
                    "1": {
                      "3": 1,
                    },
                  },
                ],
                [
                  "13",
                  {
                    "0": {
                      "3": 1,
                    },
                    "1": {
                      "2": 1,
                    },
                  },
                ],
                [
                  "12",
                  {
                    "0": {
                      "2": 1,
                    },
                    "1": {
                      "1": 1,
                    },
                  },
                ],
                [
                  "11",
                  {
                    "0": {
                      "1": 1,
                    },
                    "1": {
                      "0": 1,
                    },
                  },
                ],
                [
                  "10",
                  {
                    "0": {
                      "0": 1,
                    },
                  },
                ],
                [
                  "test",
                  {
                    "0": {
                      "0": 1,
                      "1": 1,
                      "2": 1,
                      "3": 1,
                      "4": 1,
                    },
                  },
                ],
              ],
              "nextId": 5,
              "serializationVersion": 2,
              "storedFields": {},
            },
          },
          "headers": {
            "encrypted": false,
            "index": 0,
            "recordsFrom": 11,
            "recordsTo": 15,
            "schema": "test",
            "table": "test",
          },
          "prevCID": "bagaaieralnu77mm3dv7pzhqdx75kkhrxm4rdlzqb525xa3mndlnrrewl2x5a",
          "records": {
            "11": {
              "count": 10,
              "id": 11,
              "name": "test #10",
            },
            "12": {
              "count": 11,
              "id": 12,
              "name": "test #11",
            },
            "13": {
              "count": 12,
              "id": 13,
              "name": "test #12",
            },
            "14": {
              "count": 13,
              "id": 14,
              "name": "test #13",
            },
            "15": {
              "count": 14,
              "id": 15,
              "name": "test #14",
            },
          },
        },
      },
    },
    "did": DID {
      "_client": RPCClient {},
      "_id": "did:key:z6MkofP3UGcgQT1iXWFmxczLNCddG5MrWbsrKRNGcJSVyebo",
      "_resolver": Resolver {
        "cache": [Function],
        "registry": {
          "key": [Function],
        },
      },
    },
  },
  "debug": {
    "enabled": false,
    "logger": [Function],
  },
  "def": {
    "aggregate": {
      "count": "max",
    },
    "encrypted": false,
    "indexes": {
      "name": {
        "fields": [
          "name",
        ],
        "unique": true,
      },
    },
    "rollup": 10,
    "schema": {
      "properties": {
        "count": {
          "type": "number",
        },
        "name": {
          "type": "string",
        },
      },
      "type": "object",
    },
    "schemaId": "test",
    "searchOptions": {
      "fields": [
        "name",
        "id",
      ],
    },
  },
  "encrypted": false,
  "tableId": "test",
  "writeStartAt": 0,
  "writing": false,
}
`;
